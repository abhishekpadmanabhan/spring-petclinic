pipeline {
       agent {
           label 'master'
             }
           tools {
             maven 'myMaven'
             jdk 'myJava'
                }
            stages {
               stage ('Checkout the code')
             {
                steps {
                 git branch 'master', url: 'https://github.com/abhishekpadmanabhan/spring-petclinic.git'
                 }
             }
                stage ('Code Compile') {
               steps {
                    sh """
                    mvn compile
                    """
                    }
                  }
        stage ('JUNIT Test') {
            steps{
                sh """
                mvn test
                """
            }
        }
                 stage ('Packaging') {
                    steps {
                        sh """
                        mvn package
                        """
                         }
                    }
   }
   post {
          always{
              junit 'target/surefire-reports/**/*.xml'
          }
      }
}
